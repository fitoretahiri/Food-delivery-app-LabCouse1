{"ast":null,"code":"import axios from 'axios';\nconst BASE_URL = 'http://localhost:5000';\n/*\r\nexport default axios.create({\r\n    baseURL: BASE_URL\r\n});\r\n\r\nexport const axiosPrivate = axios.create({\r\n    baseURL: BASE_URL,\r\n    headers: { 'Content-Type': 'Application/json'},\r\n    withCredentials: true\r\n});*/\n\naxios.defaults.baseURL = BASE_URL;\naxios.interceptors.response.use(resp => resp, async error => {\n  if (error.response.status === 401) {\n    const response = await axios.post('/api/authmanagement/refreshtoken', {}, {\n      withCredentials: true\n    });\n\n    if (response.status === 200) {\n      axios.defaults.headers.common['Authorization'] = `Bearer ${response.data['token']}`;\n      return axios(error.config);\n    }\n  }\n\n  return error;\n});","map":{"version":3,"names":["axios","BASE_URL","defaults","baseURL","interceptors","response","use","resp","error","status","post","withCredentials","headers","common","data","config"],"sources":["C:/Users/Arber/Documents/GitHub/Food-delivery-app-LabCouse1/Food-delivery-app-LabCouse1/front-end-code/src/api/axios.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst BASE_URL = 'http://localhost:5000'\r\n/*\r\nexport default axios.create({\r\n    baseURL: BASE_URL\r\n});\r\n\r\nexport const axiosPrivate = axios.create({\r\n    baseURL: BASE_URL,\r\n    headers: { 'Content-Type': 'Application/json'},\r\n    withCredentials: true\r\n});*/\r\n\r\naxios.defaults.baseURL = BASE_URL\r\n\r\naxios.interceptors.response.use(resp => resp, async error => {\r\n    if(error.response.status === 401){\r\n        const response = await axios.post('/api/authmanagement/refreshtoken', {}, {\r\n            withCredentials: true\r\n        })\r\n        \r\n        if(response.status === 200){\r\n            axios.defaults.headers.common['Authorization'] = `Bearer ${response.data['token']}`\r\n            \r\n            return axios(error.config);\r\n        }\r\n    }\r\n\r\n    return error;\r\n\r\n})"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,MAAMC,QAAQ,GAAG,uBAAjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAD,KAAK,CAACE,QAAN,CAAeC,OAAf,GAAyBF,QAAzB;AAEAD,KAAK,CAACI,YAAN,CAAmBC,QAAnB,CAA4BC,GAA5B,CAAgCC,IAAI,IAAIA,IAAxC,EAA8C,MAAMC,KAAN,IAAe;EACzD,IAAGA,KAAK,CAACH,QAAN,CAAeI,MAAf,KAA0B,GAA7B,EAAiC;IAC7B,MAAMJ,QAAQ,GAAG,MAAML,KAAK,CAACU,IAAN,CAAW,kCAAX,EAA+C,EAA/C,EAAmD;MACtEC,eAAe,EAAE;IADqD,CAAnD,CAAvB;;IAIA,IAAGN,QAAQ,CAACI,MAAT,KAAoB,GAAvB,EAA2B;MACvBT,KAAK,CAACE,QAAN,CAAeU,OAAf,CAAuBC,MAAvB,CAA8B,eAA9B,IAAkD,UAASR,QAAQ,CAACS,IAAT,CAAc,OAAd,CAAuB,EAAlF;MAEA,OAAOd,KAAK,CAACQ,KAAK,CAACO,MAAP,CAAZ;IACH;EACJ;;EAED,OAAOP,KAAP;AAEH,CAfD"},"metadata":{},"sourceType":"module"}