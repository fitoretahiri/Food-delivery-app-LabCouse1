{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport axios from \"../api/axios\";\nimport useAuth from './useAuth';\n\nconst useRefreshToken = () => {\n  _s();\n\n  const {\n    auth,\n    setAuth\n  } = useAuth();\n  const data = {\n    token: auth.accessToken,\n    refreshToken: auth.refreshToken\n  };\n\n  const refresh = async () => {\n    const response = await axios.get('/api/authmanagement/refreshtoken', {\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      withCredentials: true\n    });\n    setAuth(prev => {\n      console.log(JSON.stringify(prev));\n      console.log(response.data);\n      return { ...prev,\n        accessToken: response.data.token\n      };\n    });\n    return response.data.token;\n  };\n\n  return refresh;\n};\n\n_s(useRefreshToken, \"6LBGSPwejaouvM/D8gpSe86HqQw=\", false, function () {\n  return [useAuth];\n});\n\nexport default useRefreshToken;","map":{"version":3,"names":["axios","useAuth","useRefreshToken","auth","setAuth","data","token","accessToken","refreshToken","refresh","response","get","headers","withCredentials","prev","console","log","JSON","stringify"],"sources":["C:/Users/Arber/Documents/GitHub/Food-delivery-app-LabCouse1/Food-delivery-app-LabCouse1/front-end-code/src/hooks/useRefreshToken.js"],"sourcesContent":["import axios from \"../api/axios\";\r\nimport useAuth from './useAuth';\r\n\r\nconst useRefreshToken = () => {\r\n    const { auth, setAuth } = useAuth();\r\n\r\n    const data = {\r\n        token: auth.accessToken,\r\n        refreshToken: auth.refreshToken\r\n      }\r\n\r\n    const refresh = async () => {\r\n        const response = await axios.get('/api/authmanagement/refreshtoken', \r\n        {\r\n            headers: { 'Content-Type': 'application/json' },\r\n            withCredentials: true\r\n        });\r\n        setAuth(prev => {\r\n            console.log(JSON.stringify(prev));\r\n            console.log(response.data)\r\n            return { ...prev, accessToken: response.data.token}\r\n        });\r\n        return response.data.token;\r\n    }\r\n\r\n    return refresh;\r\n}\r\n\r\nexport default useRefreshToken;"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,cAAlB;AACA,OAAOC,OAAP,MAAoB,WAApB;;AAEA,MAAMC,eAAe,GAAG,MAAM;EAAA;;EAC1B,MAAM;IAAEC,IAAF;IAAQC;EAAR,IAAoBH,OAAO,EAAjC;EAEA,MAAMI,IAAI,GAAG;IACTC,KAAK,EAAEH,IAAI,CAACI,WADH;IAETC,YAAY,EAAEL,IAAI,CAACK;EAFV,CAAb;;EAKA,MAAMC,OAAO,GAAG,YAAY;IACxB,MAAMC,QAAQ,GAAG,MAAMV,KAAK,CAACW,GAAN,CAAU,kCAAV,EACvB;MACIC,OAAO,EAAE;QAAE,gBAAgB;MAAlB,CADb;MAEIC,eAAe,EAAE;IAFrB,CADuB,CAAvB;IAKAT,OAAO,CAACU,IAAI,IAAI;MACZC,OAAO,CAACC,GAAR,CAAYC,IAAI,CAACC,SAAL,CAAeJ,IAAf,CAAZ;MACAC,OAAO,CAACC,GAAR,CAAYN,QAAQ,CAACL,IAArB;MACA,OAAO,EAAE,GAAGS,IAAL;QAAWP,WAAW,EAAEG,QAAQ,CAACL,IAAT,CAAcC;MAAtC,CAAP;IACH,CAJM,CAAP;IAKA,OAAOI,QAAQ,CAACL,IAAT,CAAcC,KAArB;EACH,CAZD;;EAcA,OAAOG,OAAP;AACH,CAvBD;;GAAMP,e;UACwBD,O;;;AAwB9B,eAAeC,eAAf"},"metadata":{},"sourceType":"module"}